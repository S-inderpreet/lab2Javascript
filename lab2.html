<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Lab 2 | COMP1073 Client-Side JavaScript</title>
</head>

<body>
	<h1>Airports</h1>
	<ul>
        <li>Beijing Capital International, https://goo.gl/maps/iPe5fAqzq8C2 PEK</li>
        <li>John F Kennedy International, https://goo.gl/maps/JWwABmA3MBS2 JFK</li>
        <li>Lester B. Pearson International, https://goo.gl/maps/Ypu1dJLsnQu YYZ</li>
        <li>London Heathrow, https://goo.gl/maps/TFx8SrATdYr LHR</li>
        <li>Tokyo Haneda International, https://goo.gl/maps/5UxH2TxbRtT2 HND</li>
    </ul>
    <p id="Average"></p>
</body>
<script>
    var airportList = document.querySelector('body ul');
    airportList.innerHTML = '';
    var airports = ['Beijing Capital International, https://goo.gl/maps/iPe5fAqzq8C2 PEK',
                    'John F Kennedy International, https://goo.gl/maps/JWwABmA3MBS2 JFK',
                    'Lester B. Pearson International, https://goo.gl/maps/Ypu1dJLsnQu YYZ',
                    'London Heathrow, https://goo.gl/maps/TFx8SrATdYr LHR',
                    'Tokyo Haneda International, https://goo.gl/maps/5UxH2TxbRtT2 HND'];
    var sum = 0;
    for(var i = 0; i < airports.length; i++) {
        var input = airports[i];
        // Put your code here inside this loop
      var indexOfComma = airports[i].indexOf(',');
			var airportName=airports[i].substring(0, indexOfComma);
			var airportCode=airports[i].substring(airports[i].length-3,airports[i].length);
			var url= airports[i].substring(indexOfComma+1 , airports[i].length-4);
			var airportlink= (airportCode+" - "+airportName).link(url);
			// link.setAttribute("target", "_blank");
			
        var result = airportlink;
        
        var listItem = document.createElement('li');
        listItem.innerHTML = result;
        airportList.appendChild(listItem);

        var nameLength = airportName.length;
        sum += nameLength;
        if( i == 4){
            var AVG = sum/airports.length;
            document.getElementById("Average").innerHTML = "Average number of Characters in  all the airport names are: "+ AVG;
        }
    }
</script>
</html>
